"use strict";(self.webpackChunkduneshenko=self.webpackChunkduneshenko||[]).push([[678],{287:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(7294),a=n(8348),l=n(7464),o=n(1597),c=n(9931),u=n.n(c),i=n(7689),m=n(7059),s=n(5785),d=(0,r.createContext)({currentElement:null,watchElement:function(e){},unwatchElement:function(e){}}),f=function(e){var t=e.children,n=(0,r.useState)([]),a=n[0],l=n[1],o=(0,r.useState)(null),c=o[0],u=o[1],i=(0,r.useCallback)((function(e){l((function(t){return[].concat((0,s.Z)(t),[e])}))}),[l]),m=(0,r.useCallback)((function(e){l((function(t){return t.filter((function(t){return t!==e}))}))}),[l]);return(0,r.useEffect)((function(){var e=function(){var e,t,n;u((0,s.Z)(a).sort((e=function(e){return e.getBoundingClientRect().top},t=!0,void 0===t&&(t=!1),void 0===n&&(n=!1),function(r,a){var l=e(r),o=e(a);if(l===o)return 0;if(t){var c=[o,l];l=c[0],o=c[1]}return null==l?n?1:-1:null==o?n?-1:1:l>o?1:-1})).find((function(e){var t=e.getBoundingClientRect();return t.top<window.innerHeight/2&&t.bottom>0})))};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[a,u]),r.createElement(d.Provider,{value:{currentElement:c,watchElement:i,unwatchElement:m}},t)},v=function(e){var t=e.className,n=e.videos;return r.createElement("div",{className:t},r.createElement("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0},n.map((function(e){return r.createElement("source",{key:e.src,src:e.src,type:e.type})}))))},E=function(e){var t,n,a,l,c,i,s=e.work,f=(0,m.c)(s.image),E=s.video.map((function(e){return{src:e.src.publicURL,type:e.type}})),k=(0,r.useRef)(),p=(n=k.current,a=(0,r.useContext)(d),l=a.currentElement,c=a.watchElement,i=a.unwatchElement,(0,r.useEffect)((function(){if(n)return c(n),function(){i(n)}}),[n,c,i]),n===l);return r.createElement("div",null,r.createElement("div",{className:"Card-module--title--riOCF"},s.name," '",s.type,"'"),r.createElement(o.rU,{to:"/"+s.slug+"/",className:"Card-module--link--aINjk",ref:k},r.createElement(v,{videos:E,className:u()("Card-module--video--vz6JT",(t={},t["Card-module--autoplay--Ma2Fx"]=p,t))}),r.createElement(m.G,{image:f,alt:s.name,className:"Card-module--image--Cwc6E"})))};function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){for(var e,t=(0,i.V8)("Works"),n=[],a=k((0,o.K2)("3408833263").allWork.nodes);!(e=a()).done;){var l=e.value;n[l.slug]=l}return r.createElement(f,null,r.createElement("div",{className:u()("Works-module--cards---b20j",{"appear-bottom":t})},r.createElement("div",{className:"Works-module--card2--x3dUw"},r.createElement(E,{work:n["in-the-dark"]})),r.createElement("div",{className:"Works-module--card1--1EUX7"},r.createElement(E,{work:n.feel})),r.createElement("div",{className:"Works-module--card3--PxNtP"},r.createElement(E,{work:n.game})),r.createElement("div",{className:"Works-module--card4--buMjV"},r.createElement(E,{work:n["yandex-lavka"]})),r.createElement("div",{className:"Works-module--card5--3Iyy9"},r.createElement(E,{work:n["antonio-banderas-perfume"]})),r.createElement("div",{className:"Works-module--card6--Fv3EN"},r.createElement(E,{work:n.youth}))))},w=function(){return r.createElement(l.Z,null,r.createElement(a.Z,null),r.createElement(y,null))}}}]);
//# sourceMappingURL=component---src-pages-index-js-77bf916097a2781e1ca4.js.map